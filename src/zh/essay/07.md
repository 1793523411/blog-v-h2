---
time: 2021-02-23
icon: template
category: é¢è¯•
article: true
sidebar: auto
footer: ğŸ˜ğŸ˜ğŸ˜
tag:
  - å‰ç«¯
  - JavaScript
---

# å‰ç«¯é¢è¯•-JavaScript ä¸­çš„æ•°ç»„

## æ•°ç»„ API æ±‡æ€»

|  æ•°ç»„åˆ†ç±»  |            æ”¹å˜è‡ªèº«çš„æ–¹æ³•             |                       ä¸æ”¹å˜è‡ªèº«çš„æ–¹æ³•                        |               éå†æ–¹æ³•(ä¸æ”¹å˜è‡ªèº«)               |
| :--------: | :-----------------------------------: | :-----------------------------------------------------------: | :----------------------------------------------: |
|  ES5 ä»¥å‰  | pop,push,reverse,shift,splice,unshift | concat,join,slice,toString,toLocateString,indexOf,lastIndexOf | forEach,every,some,filter,map,reduce,reduceRight |
| ES6 åŠä»¥å |            copyWhithi,fill            |                       includes,toSource                       |        entries,find,findIndex,keys,values        |

### Array çš„æ„é€ å™¨

```js
// ä½¿ç”¨ Array æ„é€ å™¨ï¼Œå¯ä»¥è‡ªå®šä¹‰é•¿åº¦
var a = Array(6); // [empty Ã— 6]
// ä½¿ç”¨å¯¹è±¡å­—é¢é‡
var b = [];
b.length = 6; // [undefined Ã— 6]
```

Array æ„é€ å™¨æ ¹æ®å‚æ•°é•¿åº¦çš„ä¸åŒï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š

new Array(arg1, arg2,â€¦)ï¼Œå‚æ•°é•¿åº¦ä¸º 0 æˆ–é•¿åº¦å¤§äºç­‰äº 2 æ—¶ï¼Œä¼ å…¥çš„å‚æ•°å°†æŒ‰ç…§é¡ºåºä¾æ¬¡æˆä¸ºæ–°æ•°ç»„çš„ç¬¬ 0 è‡³ç¬¬ N é¡¹ï¼ˆå‚æ•°é•¿åº¦ä¸º 0 æ—¶ï¼Œè¿”å›ç©ºæ•°ç»„ï¼‰ï¼›

new Array(len)ï¼Œå½“ len ä¸æ˜¯æ•°å€¼æ—¶ï¼Œå¤„ç†åŒä¸Šï¼Œè¿”å›ä¸€ä¸ªåªåŒ…å« len å…ƒç´ ä¸€é¡¹çš„æ•°ç»„ï¼›å½“ len ä¸ºæ•°å€¼æ—¶ï¼Œlen æœ€å¤§ä¸èƒ½è¶…è¿‡ 32 ä½æ— ç¬¦å·æ•´å‹ï¼Œå³éœ€è¦å°äº 2 çš„ 32 æ¬¡æ–¹ï¼ˆlen æœ€å¤§ä¸º Math.pow(2,32)ï¼‰ï¼Œå¦åˆ™å°†æŠ›å‡º RangeErrorã€‚

### ES6 æ–°å¢çš„æ„é€ æ–¹æ³•ï¼šArray.of å’Œ Array.from

Array.of ç”¨äºå°†å‚æ•°ä¾æ¬¡è½¬åŒ–ä¸ºæ•°ç»„ä¸­çš„ä¸€é¡¹ï¼Œç„¶åè¿”å›è¿™ä¸ªæ–°æ•°ç»„ï¼Œè€Œä¸ç®¡è¿™ä¸ªå‚æ•°æ˜¯æ•°å­—è¿˜æ˜¯å…¶ä»–ã€‚å®ƒåŸºæœ¬ä¸Šä¸ Array æ„é€ å™¨åŠŸèƒ½ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±åœ¨å•ä¸ªæ•°å­—å‚æ•°çš„å¤„ç†ä¸Š

æ¯”å¦‚ï¼Œåœ¨ä¸‹é¢çš„è¿™å‡ è¡Œä»£ç ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åŒºåˆ«ï¼šå½“å‚æ•°ä¸ºä¸¤ä¸ªæ—¶ï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼›å½“å‚æ•°æ˜¯ä¸€ä¸ªæ—¶ï¼ŒArray.of ä¼šæŠŠå‚æ•°å˜æˆæ•°ç»„é‡Œçš„ä¸€é¡¹ï¼Œè€Œæ„é€ å™¨åˆ™ä¼šç”Ÿæˆé•¿åº¦å’Œç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒçš„ç©ºæ•°ç»„ã€‚

```js
Array.of(8.0); // [8]
Array(8.0); // [empty Ã— 8]
Array.of(8.0, 5); // [8, 5]
Array(8.0, 5); // [8, 5]
Array.of("8"); // ["8"]
Array("8"); // ["8"]
```

Array.from çš„è®¾è®¡åˆè¡·æ˜¯å¿«é€Ÿä¾¿æ·åœ°åŸºäºå…¶ä»–å¯¹è±¡åˆ›å»ºæ–°æ•°ç»„ï¼Œå‡†ç¡®æ¥è¯´å°±æ˜¯ä»ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯è¿­ä»£å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å®ä¾‹ã€‚å…¶å®å°±æ˜¯ï¼Œåªè¦ä¸€ä¸ªå¯¹è±¡æœ‰è¿­ä»£å™¨ï¼ŒArray.from å°±èƒ½æŠŠå®ƒå˜æˆä¸€ä¸ªæ•°ç»„ï¼ˆæ³¨æ„ï¼šæ˜¯è¿”å›æ–°çš„æ•°ç»„ï¼Œä¸æ”¹å˜åŸå¯¹è±¡ï¼‰

Array.from æ‹¥æœ‰ 3 ä¸ªå‚æ•°ï¼š

- ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå¿…é€‰ï¼›
- åŠ å·¥å‡½æ•°ï¼Œæ–°ç”Ÿæˆçš„æ•°ç»„ä¼šç»è¿‡è¯¥å‡½æ•°çš„åŠ å·¥å†è¿”å›ï¼›
- this ä½œç”¨åŸŸï¼Œè¡¨ç¤ºåŠ å·¥å‡½æ•°æ‰§è¡Œæ—¶ this çš„å€¼ã€‚

```js
var obj = { 0: "a", 1: "b", 2: "c", length: 3 };
Array.from(
  obj,
  function(value, index) {
    console.log(value, index, this, arguments.length);
    return value.repeat(3); //å¿…é¡»æŒ‡å®šè¿”å›å€¼ï¼Œå¦åˆ™è¿”å› undefined ç»“æœ["aaa","bbb","ccc"]
  },
  obj
);
```

é™¤äº†ä¸Šè¿° obj å¯¹è±¡ä»¥å¤–ï¼Œæ‹¥æœ‰è¿­ä»£å™¨çš„å¯¹è±¡è¿˜åŒ…æ‹¬ Stringã€Setã€Map ç­‰ï¼ŒArray.from ç»Ÿç»Ÿå¯ä»¥å¤„ç†

::: tip es6 æ ‡å‡†å…¥é—¨ç¬¬ä¸‰ç‰ˆ
ä»»ä½•æœ‰ length å±æ€§çš„å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡ Array.form æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œè¿™ç§æƒ…å†µæ‰©å±•è¿ç®—ç¬¦æ— æ³•è½¬æ¢
:::

```js
// String
Array.from("abc"); // ["a", "b", "c"]
// Set
Array.from(new Set(["abc", "def"])); // ["abc", "def"]
// Map
Array.from(
  new Map([
    [1, "ab"],
    [2, "de"],
  ])
);
// [[1, 'ab'], [2, 'de']]
```

### Array çš„åˆ¤æ–­

åœ¨ ES5 æä¾›è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬è‡³å°‘æœ‰å¦‚ä¸‹ 5 ç§æ–¹å¼å»åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæ•°ç»„

```js
var a = [];
// 1.åŸºäºinstanceof
a instanceof Array;
// 2.åŸºäºconstructor
a.constructor === Array;
// 3.åŸºäºObject.prototype.isPrototypeOf
Array.prototype.isPrototypeOf(a);
// 4.åŸºäºgetPrototypeOf
Object.getPrototypeOf(a) === Array.prototype;
// 5.åŸºäºObject.prototype.toString
Object.prototype.toString.apply(a) === "[object Array]";
```

ES6 ä¹‹åæ–°å¢äº†ä¸€ä¸ª Array.isArray æ–¹æ³•ï¼Œèƒ½ç›´æ¥åˆ¤æ–­æ•°æ®ç±»å‹æ˜¯å¦ä¸ºæ•°ç»„

::: tip ä¸€ä¸ª Array.isArray çš„ polyfill

```js
if (!Array.isArray) {
  Array.isArray = function(arg) {
    return Object.prototype.toString.call(arg) === "[object Array]";
  };
}
```

:::

### æ”¹å˜è‡ªèº«çš„æ–¹æ³•

åŸºäº ES6ï¼Œä¼šæ”¹å˜è‡ªèº«å€¼çš„æ–¹æ³•ä¸€å…±æœ‰ 9 ä¸ªï¼Œåˆ†åˆ«ä¸º popã€pushã€reverseã€shiftã€sortã€spliceã€unshiftï¼Œä»¥åŠä¸¤ä¸ª ES6 æ–°å¢çš„æ–¹æ³• copyWithin å’Œ fill

```js
// popæ–¹æ³•
var array = ["cat", "dog", "cow", "chicken", "mouse"];
var item = array.pop();
console.log(array); // ["cat", "dog", "cow", "chicken"]
console.log(item); // mouse
// pushæ–¹æ³•
var array = ["football", "basketball", "badminton"];
var i = array.push("golfball");
console.log(array);
// ["football", "basketball", "badminton", "golfball"]
console.log(i); // 4
// reverseæ–¹æ³•
var array = [1, 2, 3, 4, 5];
var array2 = array.reverse();
console.log(array); // [5,4,3,2,1]
console.log(array2 === array); // true
// shiftæ–¹æ³•
var array = [1, 2, 3, 4, 5];
var item = array.shift();
console.log(array); // [2,3,4,5]
console.log(item); // 1
// unshiftæ–¹æ³•
var array = ["red", "green", "blue"];
var length = array.unshift("yellow");
console.log(array); // ["yellow", "red", "green", "blue"]
console.log(length); // 4
// sortæ–¹æ³•
var array = ["apple", "Boy", "Cat", "dog"];
var array2 = array.sort();
console.log(array); // ["Boy", "Cat", "apple", "dog"]
console.log(array2 == array); // true
// spliceæ–¹æ³•
var array = ["apple", "boy"];
var splices = array.splice(1, 1);
console.log(array); // ["apple"]
console.log(splices); // ["boy"]
// copyWithinæ–¹æ³•
var array = [1, 2, 3, 4, 5];
var array2 = array.copyWithin(0, 3);
console.log(array === array2, array2); // true [4, 5, 3, 4, 5]
// fillæ–¹æ³•
var array = [1, 2, 3, 4, 5];
var array2 = array.fill(10, 0, 3);
console.log(array === array2, array2);
// true [10, 10, 10, 4, 5], å¯è§æ•°ç»„åŒºé—´[0,3]çš„å…ƒç´ å…¨éƒ¨æ›¿æ¢ä¸º10
```

### ä¸æ”¹å˜è‡ªèº«çš„æ–¹æ³•

åŸºäº ES7ï¼Œä¸ä¼šæ”¹å˜è‡ªèº«çš„æ–¹æ³•ä¹Ÿæœ‰ 9 ä¸ªï¼Œåˆ†åˆ«ä¸º concatã€joinã€sliceã€toStringã€toLocaleStringã€indexOfã€lastIndexOfã€æœªå½¢æˆæ ‡å‡†çš„ toSourceï¼Œä»¥åŠ ES7 æ–°å¢çš„æ–¹æ³• includes

```js
// concatæ–¹æ³•
var array = [1, 2, 3];
var array2 = array.concat(4, [5, 6], [7, 8, 9]);
console.log(array2); // [1, 2, 3, 4, 5, 6, 7, 8, 9]
console.log(array); // [1, 2, 3], å¯è§åŸæ•°ç»„å¹¶æœªè¢«ä¿®æ”¹
// joinæ–¹æ³•
var array = ["We", "are", "Chinese"];
console.log(array.join()); // "We,are,Chinese"
console.log(array.join("+")); // "We+are+Chinese"
// sliceæ–¹æ³•
var array = ["one", "two", "three", "four", "five"];
console.log(array.slice()); // ["one", "two", "three","four", "five"]
console.log(array.slice(2, 3)); // ["three"]
// toStringæ–¹æ³•
var array = ["Jan", "Feb", "Mar", "Apr"];
var str = array.toString();
console.log(str); // Jan,Feb,Mar,Apr
// tolocalStringæ–¹æ³•
var array = [{ name: "zz" }, 123, "abc", new Date()];
var str = array.toLocaleString();
console.log(str); // [object Object],123,abc,2016/1/5 ä¸‹åˆ1:06:23
// indexOfæ–¹æ³•
var array = ["abc", "def", "ghi", "123"];
console.log(array.indexOf("def")); // 1
// includesæ–¹æ³•
var array = [-0, 1, 2];
console.log(array.includes(+0)); // true
console.log(array.includes(1)); // true
var array = [NaN];
console.log(array.includes(NaN)); // true
```

::: tip
å…¶ä¸­ includes æ–¹æ³•éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå…ƒç´ ä¸­æœ‰ 0ï¼Œé‚£ä¹ˆåœ¨åˆ¤æ–­è¿‡ç¨‹ä¸­ä¸è®ºæ˜¯ +0 è¿˜æ˜¯ -0 éƒ½ä¼šåˆ¤æ–­ä¸º Trueï¼Œè¿™é‡Œçš„ includes å¿½ç•¥äº† +0 å’Œ -0ã€‚

slice ä¸æ”¹å˜è‡ªèº«ï¼Œè€Œ splice ä¼šæ”¹å˜è‡ªèº«,slice çš„è¯­æ³•æ˜¯ï¼š`arr.slice([start[, end]])`ï¼Œè€Œ splice çš„è¯­æ³•æ˜¯ï¼š`arr.splice(start,deleteCount[, item1[, item2[, â€¦]]])`ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼ŒäºŒè€…å°±å·²ç»æœ‰åŒºåˆ«äº†ï¼Œsplice ç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆ é™¤çš„ä¸ªæ•°ï¼Œè€Œ slice çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ end çš„åæ ‡ï¼ˆå¯é€‰ï¼‰

:::

### æ•°ç»„éå†çš„æ–¹æ³•

åŸºäº ES6ï¼Œä¸ä¼šæ”¹å˜è‡ªèº«çš„éå†æ–¹æ³•ä¸€å…±æœ‰ 12 ä¸ªï¼Œåˆ†åˆ«ä¸º forEachã€everyã€someã€filterã€mapã€reduceã€reduceRightï¼Œä»¥åŠ ES6 æ–°å¢çš„æ–¹æ³• entriesã€findã€findIndexã€keysã€valuesã€‚

```js
// forEachæ–¹æ³•
var array = [1, 3, 5];
var obj = { name: "cc" };
var sReturn = array.forEach(function(value, index, array) {
  array[index] = value;
  console.log(this.name); // ccè¢«æ‰“å°äº†ä¸‰æ¬¡, thisæŒ‡å‘obj
}, obj);
console.log(array); // [1, 3, 5]
console.log(sReturn); // undefined, å¯è§è¿”å›å€¼ä¸ºundefined
// everyæ–¹æ³•
var o = { 0: 10, 1: 8, 2: 25, length: 3 };
var bool = Array.prototype.every.call(
  o,
  function(value, index, obj) {
    return value >= 8;
  },
  o
);
console.log(bool); // true
// someæ–¹æ³•
var array = [18, 9, 10, 35, 80];
var isExist = array.some(function(value, index, array) {
  return value > 20;
});
console.log(isExist); // true
// map æ–¹æ³•
var array = [18, 9, 10, 35, 80];
array.map((item) => item + 1);
console.log(array); // [19, 10, 11, 36, 81]
// filter æ–¹æ³•
var array = [18, 9, 10, 35, 80];
var array2 = array.filter(function(value, index, array) {
  return value > 20;
});
console.log(array2); // [35, 80]
// reduceæ–¹æ³•
var array = [1, 2, 3, 4];
var s = array.reduce(function(previousValue, value, index, array) {
  return previousValue * value;
}, 1);
console.log(s); // 24
// ES6å†™æ³•æ›´åŠ ç®€æ´
array.reduce((p, v) => p * v); // 24
// reduceRightæ–¹æ³• (å’Œreduceçš„åŒºåˆ«å°±æ˜¯ä»åå¾€å‰ç´¯è®¡)
var array = [1, 2, 3, 4];
array.reduceRight((p, v) => p * v); // 24
// entriesæ–¹æ³•
var array = ["a", "b", "c"];
var iterator = array.entries();
console.log(iterator.next().value); // [0, "a"]
console.log(iterator.next().value); // [1, "b"]
console.log(iterator.next().value); // [2, "c"]
console.log(iterator.next().value); // undefined, è¿­ä»£å™¨å¤„äºæ•°ç»„æœ«å°¾æ—¶, å†è¿­ä»£å°±ä¼šè¿”å›undefined
// find & findIndexæ–¹æ³•
var array = [1, 3, 5, 7, 8, 9, 10];
function f(value, index, array) {
  return value % 2 == 0; // è¿”å›å¶æ•°
}
function f2(value, index, array) {
  return value > 20; // è¿”å›å¤§äº20çš„æ•°
}
console.log(array.find(f)); // 8
console.log(array.find(f2)); // undefined
console.log(array.findIndex(f)); // 4
console.log(array.findIndex(f2)); // -1
// keysæ–¹æ³•
[...Array(10).keys()]; // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[...new Array(10).keys()]; // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
// valuesæ–¹æ³•
var array = ["abc", "xyz"];
var iterator = array.values();
console.log(iterator.next().value); //abc
console.log(iterator.next().value); //xyz
```

::: tip
æœ‰äº›éå†æ–¹æ³•ä¸ä¼šè¿”å›å¤„ç†ä¹‹åçš„æ•°ç»„ï¼Œæ¯”å¦‚ forEachï¼›æœ‰äº›æ–¹æ³•ä¼šè¿”å›å¤„ç†ä¹‹åçš„æ•°ç»„ï¼Œæ¯”å¦‚ filter
:::

::: tip
reduce æ–¹æ³•ä¹Ÿéœ€è¦é‡ç‚¹å…³æ³¨ï¼Œå…¶å‚æ•°å¤æ‚ä¸”å¤šï¼Œé€šå¸¸ä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œå…¶å®ä½¿ç”¨ reduce å¾ˆå®¹æ˜“å°±å¯ä»¥è§£å†³ã€‚æˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ï¼Œreduce åˆ°åº•èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå…ˆçœ‹ä¸‹ reduce çš„ä¸¤ä¸ªå‚æ•°ã€‚

é¦–å…ˆæ˜¯ callbackï¼ˆä¸€ä¸ªåœ¨æ•°ç»„çš„æ¯ä¸€é¡¹ä¸­è°ƒç”¨çš„å‡½æ•°ï¼Œæ¥å—å››ä¸ªå‚æ•°ï¼‰ï¼š

- previousValueï¼ˆä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ï¼‰
- currentValueï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼‰
- currentIndexï¼ˆå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ä¸‹æ ‡ï¼‰
- arrayï¼ˆè°ƒç”¨ reduce() æ–¹æ³•çš„æ•°ç»„ï¼‰

ç„¶åæ˜¯ initialValueï¼ˆå¯é€‰çš„åˆå§‹å€¼ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ä¼ ç»™ previousValue çš„å€¼ï¼‰

ä¸¾ä¸ªæ•°ç»„æ±‚å’Œçš„

```js
// ç¬¬ä¸€ç§æ–¹æ³•ï¼š
var arr = [1, 2, 3, 4];
var sum = 0;
arr.forEach(function(e) {
  sum += e;
}); // sum = 10
//Â ç¬¬äºŒç§æ–¹æ³•
var arr = [1, 2, 3, 4];
var sum = 0;
arr.map(function(obj) {
  sum += obj;
});
//Â ç¬¬ä¸‰ç§æ–¹æ³•
var arr = [1, 2, 3, 4];
arr.reduce(function(pre, cur) {
  return pre + cur;
});
```

:::

###

## ç±»æ•°ç»„

## å®ç°æ•°ç»„æ‰å¹³åŒ–

## å…³äºæ’åº
