---
time: 2021-03-09
icon: template
category: é¢è¯•
article: true
sidebar: auto
footer: ğŸ˜ğŸ˜ğŸ˜
tag:
  - å‰ç«¯
  - webpack
---

# å‰ç«¯é¢è¯•-webpack ä¸­çš„ loader

> Webpack æƒ³è¦å®ç°çš„æ˜¯æ•´ä¸ªå‰ç«¯é¡¹ç›®çš„æ¨¡å—åŒ–ï¼Œé¡¹ç›®ä¸­çš„å„ç§èµ„æºï¼ˆåŒ…æ‹¬ CSS æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼‰éƒ½åº”è¯¥å±äºéœ€è¦è¢«ç®¡ç†çš„æ¨¡å—ã€‚æ¢å¥è¯è¯´ï¼Œ Webpack ä¸ä»…æ˜¯ JavaScript æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œè¿˜æ˜¯æ•´ä¸ªå‰ç«¯é¡¹ç›®ï¼ˆå‰ç«¯å·¥ç¨‹ï¼‰çš„æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Webpack å»ç®¡ç†å‰ç«¯é¡¹ç›®ä¸­ä»»æ„ç±»å‹çš„èµ„æºæ–‡ä»¶
>
> å› ä¸º Webpack å®ç°ä¸åŒç§ç±»èµ„æºæ¨¡å—åŠ è½½çš„æ ¸å¿ƒå°±æ˜¯ Loaderï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘æ¥å’Œä½ èŠèŠ Webpack çš„ Loader æœºåˆ¶

## åŠ è½½èµ„æºæ¨¡å—

æˆ‘ä»¬å°è¯•é€šè¿‡ Webpack æ‰“åŒ…é¡¹ç›®ä¸­çš„ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œç”±æ­¤å¼€å§‹æ¢ç´¢ Webpack æ˜¯å¦‚ä½•åŠ è½½èµ„æºæ¨¡å—

ä¸‹é¢æ˜¯ä»£ç ç›®å½•

```
 â””â”€ 03-webpack-loader Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· sample root dir
    â”œâ”€â”€ src Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· source dir
    â”‚   â””â”€â”€ main.css Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· main styles
    â”œâ”€â”€ package.json Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· package file
    â””â”€â”€ webpack.config.js Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· webpack config file
```

```css
/* ./src/main.css */
body {
  margin: 0 auto;
  padding: 0 20px;
  max-width: 800px;
  background: #f4f8fb;
}
```

ç„¶åå°† Webpack é…ç½®ä¸­çš„å…¥å£æ–‡ä»¶è·¯å¾„æŒ‡å®šä¸º main.css çš„æ–‡ä»¶è·¯å¾„ï¼Œè®© Webpack ç›´æ¥æ‰“åŒ… CSS èµ„æºæ–‡ä»¶ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹æ‰€ç¤º

```js
module.exports = {
  // æ ·å¼æ–‡ä»¶è·¯å¾„
  entry: "./src/main.css",
  output: {
    filename: "bundle.js",
  },
};
```

::: tip
Webpack å¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚æˆ‘ä»¬å¿…é¡»ä»¥ JS æ–‡ä»¶ä½œä¸ºæ‰“åŒ…å…¥å£ï¼Œåªæ˜¯åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç”¨ JS æ–‡ä»¶ä½œä¸ºæ‰“åŒ…å…¥å£ï¼Œå› ä¸º JS æ–‡ä»¶æ‰æ˜¯ç¨‹åºçš„é€»è¾‘å…¥å£ï¼Œä»¥ JS æ–‡ä»¶ä½œä¸ºå…¥å£ç›¸å¯¹æ›´åˆç†

æˆ‘ä»¬è¿™é‡Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ CSS æ–‡ä»¶ä½œä¸ºå…¥å£å‘¢ï¼Ÿå…¶å®å°±æ˜¯å•çº¯åœ°ä¸ºäº†å°è¯•ä½¿ç”¨ Webpack ç›´æ¥å»æ‰“åŒ… CSS æ–‡ä»¶
:::

é…ç½®å®Œæˆè¿‡åï¼Œè¿›è¡Œæ‰“åŒ…ï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯å¤§ä½“çš„æ„æ€æ˜¯è¯´ï¼Œåœ¨è§£ææ¨¡å—è¿‡ç¨‹ä¸­é‡åˆ°äº†éæ³•å­—ç¬¦ï¼Œè€Œä¸”é”™è¯¯å‡ºç°çš„ä½ç½®å°±æ˜¯åœ¨æˆ‘ä»¬çš„ CSS æ–‡ä»¶ä¸­

å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸º Webpack å†…éƒ¨é»˜è®¤åªèƒ½å¤Ÿå¤„ç† JS æ¨¡å—ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œå®ƒé»˜è®¤æŠŠæ‰€æœ‰é‡åˆ°çš„æ–‡ä»¶éƒ½å½“ä½œ JavaScript ä»£ç è¿›è¡Œè§£æï¼Œä½†æ˜¯æ­¤å¤„æˆ‘ä»¬è®© Webpack å¤„ç†çš„æ˜¯ CSS ä»£ç ï¼Œè€Œ CSS ä»£ç æ˜¯ä¸ç¬¦åˆ JavaScript è¯­æ³•çš„ï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæŠ¥å‡ºæ¨¡å—è§£æé”™è¯¯

ä¸ºäº†ä½è¯ Webpack é»˜è®¤åªèƒ½å¤ŸæŒ‰ç…§ JavaScript è¯­æ³•è§£ææ¨¡å—ï¼Œå°è¯•å°† main.css æ–‡ä»¶ä¸­çš„ä»£ç ä¿®æ”¹ä¸ºä¸€æ®µ JavaScript ä»£ç ï¼Œç„¶åé‡æ–°è¿è¡Œ Webpack æ‰“åŒ…ï¼Œè¿™æ˜¯å°±ä¸ä¼šæŠ¥é”™

å›åˆ°ä¸Šé¢é‚£ä¸ªæŠ¥é”™,æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æç¤ºï¼šYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. ï¼ˆæˆ‘ä»¬éœ€è¦ç”¨é€‚å½“çš„åŠ è½½å™¨æ¥å¤„ç†è¿™ç§æ–‡ä»¶ç±»å‹ï¼Œè€Œå½“å‰å¹¶æ²¡æœ‰é…ç½®ä¸€ä¸ªå¯ä»¥ç”¨æ¥å¤„ç†æ­¤æ–‡ä»¶çš„åŠ è½½å™¨ï¼‰

æ ¹æ®è¿™ä¸ªé”™è¯¯è¯´æ˜ï¼Œæˆ‘ä»¬å‘ç° Webpack æ˜¯ç”¨ Loaderï¼ˆåŠ è½½å™¨ï¼‰æ¥å¤„ç†æ¯ä¸ªæ¨¡å—çš„ï¼Œè€Œå†…éƒ¨é»˜è®¤çš„ Loader åªèƒ½å¤„ç† JS æ¨¡å—ï¼Œå¦‚æœéœ€è¦åŠ è½½å…¶ä»–ç±»å‹çš„æ¨¡å—å°±éœ€è¦é…ç½®ä¸åŒçš„ Loader

![](https://s0.lgstatic.com/i/image3/M01/13/A8/Ciqah16gAM2AVBOyAACbAmBWOWM473.png)

## åŠ è½½å™¨çš„ä½¿ç”¨

### åŠ è½½ css èµ„æº

éœ€è¦çš„æ˜¯ä¸€ä¸ªå¯ä»¥åŠ è½½ CSS æ¨¡å—çš„ Loaderï¼Œæœ€å¸¸ç”¨åˆ°çš„æ˜¯ css-loader

```js
module: {
  rules: [
    {
      test: /\.css$/, // æ ¹æ®æ‰“åŒ…è¿‡ç¨‹ä¸­æ‰€é‡åˆ°æ–‡ä»¶è·¯å¾„åŒ¹é…æ˜¯å¦ä½¿ç”¨è¿™ä¸ª loader
      use: "css-loader", // æŒ‡å®šå…·ä½“çš„ loader
    },
  ];
}
```

åœ¨é…ç½®å¯¹è±¡çš„ module å±æ€§ä¸­æ·»åŠ ä¸€ä¸ª rules æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„å°±æ˜¯æˆ‘ä»¬é’ˆå¯¹èµ„æºæ¨¡å—çš„åŠ è½½è§„åˆ™é…ç½®ï¼Œå…¶ä¸­çš„æ¯ä¸ªè§„åˆ™å¯¹è±¡éƒ½éœ€è¦è®¾ç½®ä¸¤ä¸ªå±æ€§ï¼š

- é¦–å…ˆæ˜¯ test å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥åŒ¹é…æ‰“åŒ…è¿‡ç¨‹ä¸­æ‰€é‡åˆ°æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ä»¥ .css ç»“å°¾ï¼›
- ç„¶åæ˜¯ use å±æ€§ï¼Œå®ƒç”¨æ¥æŒ‡å®šåŒ¹é…åˆ°çš„æ–‡ä»¶éœ€è¦ä½¿ç”¨çš„ loaderï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯ css-loaderã€‚

é…ç½®å®Œæˆè¿‡åï¼Œæˆ‘ä»¬å›åˆ°å‘½ä»¤è¡Œç»ˆç«¯é‡æ–°è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œæ‰“åŒ…è¿‡ç¨‹å°±ä¸ä¼šå†å‡ºç°é”™è¯¯äº†ï¼ŒCSS æ–‡ä»¶ä¼šäº¤ç»™ css-loader å¤„ç†è¿‡åå†ç”± Webpack æ‰“åŒ…

![](https://s0.lgstatic.com/i/image3/M01/06/79/CgoCgV6gAQyAVv7XAAAyFU_9fDQ769.png)

### æ ·å¼æ¨¡å—åŠ è½½çš„é—®é¢˜

æ­¤æ—¶ï¼Œå¦‚æœå°è¯•åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™é‡Œè¾“å‡ºçš„ bundle.js æ–‡ä»¶ï¼Œä½ ä¼šå‘ç°åˆšåˆšçš„è¿™ä¸ª main.css æ¨¡å—å¹¶æ²¡æœ‰å·¥ä½œã€‚

è¿™ä¸ªé—®é¢˜çš„è§£æ³•å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦å†é¢å¤–æ·»åŠ ä¸€ä¸ª style-loaderï¼Œæ ·å¼å°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†

ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æäº§ç”Ÿè¿™ä¸ªé—®é¢˜çš„çœŸæ­£åŸå› ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬æ‰¾åˆ°åˆšåˆšç”Ÿæˆçš„ bundle.js æ–‡ä»¶ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶æ˜¯ Webpack æ‰“åŒ…åçš„ç»“æœï¼Œæ‰€æœ‰çš„æ¨¡å—éƒ½åº”è¯¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°ã€‚

ç”±äºé»˜è®¤æ‰“åŒ…å…¥å£åœ¨ Webpack è¾“å‡ºçš„ç»“æœä¸­å°±æ˜¯ç¬¬ä¸€ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦çœ‹ç¬¬ä¸€ä¸ªæ¨¡å—ç›®å‰æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://s0.lgstatic.com/i/image3/M01/06/79/CgoCgV6gARSAXyX_AAFkFP2Qek8997.png)

ä»”ç»†é˜…è¯»è¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘ç° css-loader çš„ä½œç”¨æ˜¯å°† CSS æ¨¡å—è½¬æ¢ä¸ºä¸€ä¸ª JS æ¨¡å—ï¼Œå…·ä½“çš„å®ç°æ–¹æ³•æ˜¯å°†æˆ‘ä»¬çš„ CSS ä»£ç  push åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯ç”± css-loader å†…éƒ¨çš„ä¸€ä¸ªæ¨¡å—æä¾›çš„ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰ä»»ä½•åœ°æ–¹ä½¿ç”¨åˆ°äº†è¿™ä¸ªæ•°ç»„

å› æ­¤è¿™é‡Œæ ·å¼æ²¡æœ‰ç”Ÿæ•ˆçš„åŸå› æ˜¯ï¼š **css-loader åªä¼šæŠŠ CSS æ¨¡å—åŠ è½½åˆ° JS ä»£ç ä¸­ï¼Œè€Œå¹¶ä¸ä¼šä½¿ç”¨è¿™ä¸ªæ¨¡å—**

æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ css-loader çš„åŸºç¡€ä¸Šå†ä½¿ç”¨ä¸€ä¸ª style-loaderï¼ŒæŠŠ css-loader è½¬æ¢åçš„ç»“æœé€šè¿‡ style æ ‡ç­¾è¿½åŠ åˆ°é¡µé¢ä¸Š

å®‰è£…å®Œ style-loader ä¹‹åï¼Œæˆ‘ä»¬å°†é…ç½®æ–‡ä»¶ä¸­çš„ use å±æ€§ä¿®æ”¹ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå°† style-loader ä¹Ÿæ”¾è¿›å»ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦é…ç½®å¤šä¸ª Loaderï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»åå¾€å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¿™é‡Œä¸€å®šè¦å°† css-loader æ”¾åœ¨æœ€åï¼Œå› ä¸ºå¿…é¡»è¦ css-loader å…ˆæŠŠ CSS ä»£ç è½¬æ¢ä¸º JS æ¨¡å—ï¼Œæ‰å¯ä»¥æ­£å¸¸æ‰“åŒ…ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹

```js
// ./webpack.config.js
module.exports = {
  entry: "./src/main.css",
  output: {
    filename: "bundle.js",
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        // å¯¹åŒä¸€ä¸ªæ¨¡å—ä½¿ç”¨å¤šä¸ª loaderï¼Œæ³¨æ„é¡ºåº
        use: ["style-loader", "css-loader"],
      },
    ],
  },
};
```

é…ç½®å®Œæˆä¹‹åï¼Œå†æ¬¡å›åˆ°å‘½ä»¤è¡Œé‡æ–°æ‰“åŒ…ï¼Œæ­¤æ—¶ bundle.js æ–‡ä»¶ä¸­ä¼šé¢å¤–å¤šå‡ºä¸¤ä¸ªæ¨¡å—,**style-loader çš„ä½œç”¨æ€»ç»“ä¸€å¥è¯å°±æ˜¯ï¼Œå°† css-loader ä¸­æ‰€åŠ è½½åˆ°çš„æ‰€æœ‰æ ·å¼æ¨¡å—ï¼Œé€šè¿‡åˆ›å»º style æ ‡ç­¾çš„æ–¹å¼æ·»åŠ åˆ°é¡µé¢ä¸Š**

## é€šè¿‡ JS åŠ è½½èµ„æºæ¨¡å—

ä¸€èˆ¬ Webpack æ‰“åŒ…çš„å…¥å£è¿˜æ˜¯ JavaScriptã€‚å› ä¸ºä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæ‰“åŒ…å…¥å£å°±æ˜¯åº”ç”¨çš„è¿è¡Œå…¥å£ï¼Œè€Œç›®å‰å‰ç«¯åº”ç”¨ä¸­çš„ä¸šåŠ¡æ˜¯ç”± JS é©±åŠ¨çš„ï¼Œæ‰€ä»¥æ›´åˆç†çš„åšæ³•è¿˜æ˜¯æŠŠ JS æ–‡ä»¶ä½œä¸ºæ‰“åŒ…çš„å…¥å£ï¼Œç„¶ååœ¨ JS ä»£ç ä¸­é€šè¿‡ import è¯­å¥å»åŠ è½½ CSS æ–‡ä»¶

```
â””â”€ 03-webpack-loader Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· sample root dir
    â”œâ”€â”€ src Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· source dir
    â”‚   â”œâ”€â”€ style.css Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· style module
    â”‚   â””â”€â”€ main.js Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· entry module
    â”œâ”€â”€ package.json Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· package file
    â””â”€â”€ webpack.config.js Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· webpack config file
```

```js
// ./src/main.js
import "./style.css";

// app logic...
console.log("App starts running~");
```

å³ä¾¿æ˜¯é€šè¿‡ JS ä»£ç å»åŠ è½½çš„ CSS æ¨¡å—ï¼Œcss-loader å’Œ style-loader ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚å› ä¸º Webpack åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ä¼šå¾ªç¯éå†æ¯ä¸ªæ¨¡å—ï¼Œç„¶åæ ¹æ®é…ç½®å°†æ¯ä¸ªé‡åˆ°çš„æ¨¡å—äº¤ç»™å¯¹åº”çš„ Loader å»å¤„ç†ï¼Œæœ€åå†å°†å¤„ç†å®Œçš„ç»“æœæ‰“åŒ…åˆ°ä¸€èµ·

### ä¸ºä»€ä¹ˆè¦åœ¨ JS ä¸­åŠ è½½å…¶ä»–èµ„æº

å…¶å® Webpack ä¸ä»…æ˜¯å»ºè®®æˆ‘ä»¬åœ¨ JavaScript ä¸­å¼•å…¥ CSSï¼Œè¿˜ä¼šå»ºè®®æˆ‘ä»¬åœ¨ä»£ç ä¸­å¼•å…¥å½“å‰ä¸šåŠ¡æ‰€éœ€è¦çš„ä»»æ„èµ„æºæ–‡ä»¶ã€‚å› ä¸ºçœŸæ­£éœ€è¦è¿™ä¸ªèµ„æºçš„å¹¶ä¸æ˜¯æ•´ä¸ªåº”ç”¨ï¼Œè€Œæ˜¯ä½ æ­¤æ—¶æ­£åœ¨ç¼–å†™çš„ä»£ç ã€‚è¿™å°±æ˜¯ Webpack çš„è®¾è®¡å“²å­¦

å‡è®¾æˆ‘ä»¬åœ¨å¼€å‘é¡µé¢ä¸Šçš„æŸä¸ªå±€éƒ¨åŠŸèƒ½æ—¶ï¼Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªæ ·å¼æ¨¡å—å’Œä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ã€‚å¦‚æœä½ è¿˜æ˜¯å°†è¿™äº›èµ„æºæ–‡ä»¶å•ç‹¬å¼•å…¥åˆ° HTML ä¸­ï¼Œç„¶åå†åˆ° JS ä¸­æ·»åŠ å¯¹åº”çš„é€»è¾‘ä»£ç ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœåæœŸè¿™ä¸ªå±€éƒ¨åŠŸèƒ½ä¸ç”¨äº†ï¼Œä½ å°±éœ€è¦åŒæ—¶åˆ é™¤ JS ä¸­çš„ä»£ç å’Œ HTML ä¸­çš„èµ„æºæ–‡ä»¶å¼•å…¥ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶éœ€è¦ç»´æŠ¤è¿™ä¸¤æ¡çº¿ã€‚è€Œå¦‚æœä½ éµç…§ Webpack çš„è¿™ç§è®¾è®¡ï¼Œæ‰€æœ‰èµ„æºçš„åŠ è½½éƒ½æ˜¯ç”± JS ä»£ç æ§åˆ¶ï¼ŒåæœŸä¹Ÿå°±åªéœ€è¦ç»´æŠ¤ JS ä»£ç è¿™ä¸€æ¡çº¿äº†ã€‚

æ‰€ä»¥è¯´ï¼Œé€šè¿‡ JavaScript ä»£ç å»å¼•å…¥èµ„æºæ–‡ä»¶ï¼Œæˆ–è€…è¯´æ˜¯å»ºç«‹ JavaScript å’Œèµ„æºæ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼Œå…·æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚å› ä¸º JavaScript ä»£ç æœ¬èº«è´Ÿè´£å®Œæˆæ•´ä¸ªåº”ç”¨çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œæ”¾å¤§æ¥è¯´å°±æ˜¯é©±åŠ¨äº†æ•´ä¸ªå‰ç«¯åº”ç”¨ï¼Œè€Œ JavaScript ä»£ç åœ¨å®ç°ä¸šåŠ¡åŠŸèƒ½çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°æ ·å¼ã€å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ã€‚å¦‚æœå»ºç«‹è¿™ç§ä¾èµ–å…³ç³»ï¼š

- ä¸€æ¥é€»è¾‘ä¸Šæ¯”è¾ƒåˆç†ï¼Œå› ä¸º JS ç¡®å®éœ€è¦è¿™äº›èµ„æºæ–‡ä»¶é…åˆæ‰èƒ½å®ç°æ•´ä½“åŠŸèƒ½ï¼›
- äºŒæ¥é…åˆ Webpack è¿™ç±»å·¥å…·çš„æ‰“åŒ…ï¼Œèƒ½ç¡®ä¿åœ¨ä¸Šçº¿æ—¶ï¼Œèµ„æºä¸ä¼šç¼ºå¤±ï¼Œè€Œä¸”éƒ½æ˜¯å¿…è¦çš„ã€‚

è¿™è¿˜æœ‰ä¸€äº›å…¶ä»– loader

|      åç§°      |                       é“¾æ¥                       |
| :------------: | :----------------------------------------------: |
|  file-loader   |    https://webpack.js.org/loaders/file-loader    |
|   url-loader   |    https://webpack.js.org/loaders/url-loader     |
|  babel-loader  |   https://webpack.js.org/loaders/babel-loader    |
|  style-loader  |   https://webpack.js.org/loaders/style-loader    |
|   css-loader   |    https://webpack.js.org/loaders/css-loader     |
|  sass-loader   |    https://webpack.js.org/loaders/sass-loader    |
| postcss-loader |  https://webpack.js.org/loaders/postcss-loader   |
| eslint-loader  | https://github.com/webpack-contrib/eslint-loader |
|   vue-loader   |       https://github.com/vuejs/vue-loader        |

## å¼€å‘ä¸€ä¸ª Loader

å¼€å‘ä¸€ä¸ªå¯ä»¥åŠ è½½ markdown æ–‡ä»¶çš„åŠ è½½å™¨ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥å¯¼å…¥ md æ–‡ä»¶ã€‚æˆ‘ä»¬éƒ½åº”è¯¥çŸ¥é“ markdown ä¸€èˆ¬æ˜¯éœ€è¦è½¬æ¢ä¸º html ä¹‹åå†å‘ˆç°åˆ°é¡µé¢ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›å¯¼å…¥ md æ–‡ä»¶åï¼Œç›´æ¥å¾—åˆ° markdown è½¬æ¢åçš„ html å­—ç¬¦ä¸²

æ¯ä¸ª Webpack çš„ Loader éƒ½éœ€è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬è¿™ä¸ª Loader å¯¹èµ„æºçš„å¤„ç†è¿‡ç¨‹ï¼Œå®ƒçš„è¾“å…¥å°±æ˜¯åŠ è½½åˆ°çš„èµ„æºæ–‡ä»¶å†…å®¹ï¼Œè¾“å‡ºå°±æ˜¯æˆ‘ä»¬åŠ å·¥åçš„ç»“æœã€‚æˆ‘ä»¬é€šè¿‡ source å‚æ•°æ¥æ”¶è¾“å…¥ï¼Œé€šè¿‡è¿”å›å€¼è¾“å‡ºã€‚è¿™é‡Œæˆ‘ä»¬å…ˆå°è¯•æ‰“å°ä¸€ä¸‹ sourceï¼Œç„¶ååœ¨å‡½æ•°çš„å†…éƒ¨ç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² hello loader ~ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤º

```js
// ./markdown-loader.js
module.exports = (source) => {
  // åŠ è½½åˆ°çš„æ¨¡å—å†…å®¹ => '# About\n\nthis is a markdown file.'
  console.log(source);
  // è¿”å›å€¼å°±æ˜¯æœ€ç»ˆè¢«æ‰“åŒ…çš„å†…å®¹
  return "hello loader ~";
};
```

å®Œæˆä»¥åï¼Œæˆ‘ä»¬å›åˆ° Webpack é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªåŠ è½½å™¨è§„åˆ™

```js
module: {
  rules: [
    {
      test: /\.md$/,
      // ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„
      use: "./markdown-loader",
    },
  ];
}
```

é…ç½®å®Œæˆåï¼Œæ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯è¿è¡Œæ‰“åŒ…å‘½ä»¤,æ‰“åŒ…è¿‡ç¨‹ä¸­å‘½ä»¤è¡Œç¡®å®æ‰“å°å‡ºæ¥äº†æˆ‘ä»¬æ‰€å¯¼å…¥çš„ Markdown æ–‡ä»¶å†…å®¹ï¼Œè¿™å°±æ„å‘³ç€ Loader å‡½æ•°çš„å‚æ•°ç¡®å®æ˜¯æ–‡ä»¶çš„å†…å®¹ã€‚

ä½†åŒæ—¶ä¹ŸæŠ¥å‡ºäº†ä¸€ä¸ªè§£æé”™è¯¯ï¼Œè¯´çš„æ˜¯ï¼š You may need an additional loader to handle the result of these loaders.ï¼ˆæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„åŠ è½½å™¨æ¥å¤„ç†å½“å‰åŠ è½½å™¨çš„ç»“æœï¼‰

å…¶å® Webpack åŠ è½½èµ„æºæ–‡ä»¶çš„è¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ªå·¥ä½œç®¡é“ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¾æ¬¡ä½¿ç”¨å¤šä¸ª Loaderï¼Œä½†æ˜¯æœ€ç»ˆè¿™ä¸ªç®¡é“ç»“æŸè¿‡åçš„ç»“æœå¿…é¡»æ˜¯ä¸€æ®µæ ‡å‡†çš„ JS ä»£ç å­—ç¬¦ä¸²

![](https://s0.lgstatic.com/i/image3/M01/06/7D/CgoCgV6gA8SAfv7-AAA9hfxlofw372.png)

æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œæ‰ä¼šå‡ºç°ä¸Šé¢æåˆ°çš„é”™è¯¯æç¤ºï¼Œé‚£è§£å†³çš„åŠæ³•ä¹Ÿå°±å¾ˆæ˜æ˜¾äº†ï¼š

1. ç›´æ¥åœ¨è¿™ä¸ª Loader çš„æœ€åè¿”å›ä¸€æ®µ JS ä»£ç å­—ç¬¦ä¸²ï¼›

2. å†æ‰¾ä¸€ä¸ªåˆé€‚çš„åŠ è½½å™¨ï¼Œåœ¨åé¢æ¥ç€å¤„ç†æˆ‘ä»¬è¿™é‡Œå¾—åˆ°çš„ç»“æœã€‚

å…ˆæ¥å°è¯•ç¬¬ä¸€ç§åŠæ³•ã€‚å›åˆ° markdown-loader ä¸­ï¼Œæˆ‘ä»¬å°†è¿”å›çš„å­—ç¬¦ä¸²å†…å®¹ä¿®æ”¹ä¸º console.log('hello loader~')ï¼Œç„¶åå†æ¬¡è¿è¡Œæ‰“åŒ…ï¼Œæ­¤æ—¶ Webpack å°±ä¸å†ä¼šæŠ¥é”™äº†

```js
// ./markdown-loader.js
module.exports = (source) => {
  // åŠ è½½åˆ°çš„æ¨¡å—å†…å®¹ => '# About\n\nthis is a markdown file.'
  console.log(source);
  // è¿”å›å€¼å°±æ˜¯æœ€ç»ˆè¢«æ‰“åŒ…çš„å†…å®¹
  // return 'hello loader ~'
  return 'console.log("hello loader ~")';
};
```

é‚£æ­¤æ—¶æ‰“åŒ…çš„ç»“æœæ˜¯æ€æ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€è¾“å‡ºçš„ bundle.jsï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªæ¨¡å—ï¼ˆå› ä¸ºè¿™ä¸ª md æ–‡ä»¶æ˜¯åå¼•å…¥çš„ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://s0.lgstatic.com/i/image3/M01/06/7E/CgoCgV6gA_mAVyS1AADwR_o4vW0140.png)

è¿™ä¸ªæ¨¡å—é‡Œé¢éå¸¸ç®€å•ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬åˆšåˆšè¿”å›çš„å­—ç¬¦ä¸²ç›´æ¥æ‹¼æ¥åˆ°äº†è¯¥æ¨¡å—ä¸­ã€‚è¿™ä¹Ÿè§£é‡Šäº†åˆšåˆš Loader ç®¡é“æœ€åå¿…é¡»è¿”å› JS ä»£ç çš„åŸå› ï¼Œå› ä¸ºå¦‚æœéšä¾¿è¿”å›ä¸€ä¸ªå†…å®¹ï¼Œæ”¾åˆ°è¿™é‡Œè¯­æ³•å°±ä¸é€šè¿‡äº†

äº†è§£äº† Loader å¤§è‡´çš„å·¥ä½œæœºåˆ¶è¿‡å,æ¥ç€å®Œæˆéœ€æ±‚,å®‰è£…ä¸€ä¸ªèƒ½å¤Ÿå°† Markdown è§£æä¸º HTML çš„æ¨¡å—ï¼Œå«ä½œ marked

å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨ markdown-loader.js ä¸­å¯¼å…¥è¿™ä¸ªæ¨¡å—ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªæ¨¡å—å»è§£ææˆ‘ä»¬çš„ sourceã€‚è¿™é‡Œè§£æå®Œçš„ç»“æœå°±æ˜¯ä¸€æ®µ HTML å­—ç¬¦ä¸²ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥è¿”å›çš„è¯åŒæ ·ä¼šé¢ä¸´ Webpack æ— æ³•è§£ææ¨¡å—çš„é—®é¢˜ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯æŠŠè¿™æ®µ HTML å­—ç¬¦ä¸²æ‹¼æ¥ä¸ºä¸€æ®µ JS ä»£ç 

æ­¤æ—¶æˆ‘ä»¬å¸Œæœ›è¿”å›çš„ä»£ç æ˜¯é€šè¿‡ module.exports å¯¼å‡ºè¿™æ®µ HTML å­—ç¬¦ä¸²ï¼Œè¿™æ ·å¤–ç•Œå¯¼å…¥æ¨¡å—æ—¶å°±å¯ä»¥æ¥æ”¶åˆ°è¿™ä¸ª HTML å­—ç¬¦ä¸²äº†ã€‚å¦‚æœåªæ˜¯ç®€å•åœ°æ‹¼æ¥ï¼Œé‚£ HTML ä¸­çš„æ¢è¡Œå’Œå¼•å·å°±éƒ½å¯èƒ½ä¼šé€ æˆè¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªå°æŠ€å·§:å…ˆé€šè¿‡ JSON.stringify() å°†å­—æ®µå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ ‡å‡†çš„ JSON å­—ç¬¦ä¸²ï¼Œç„¶åå†å‚ä¸æ‹¼æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜äº†

```js
// ./markdown-loader.js
const marked = require("marked");

module.exports = (source) => {
  // 1. å°† markdown è½¬æ¢ä¸º html å­—ç¬¦ä¸²
  const html = marked(source);
  // html => '<h1>About</h1><p>this is a markdown file.</p>'
  // 2. å°† html å­—ç¬¦ä¸²æ‹¼æ¥ä¸ºä¸€æ®µå¯¼å‡ºå­—ç¬¦ä¸²çš„ JS ä»£ç 
  const code = `module.exports = ${JSON.stringify(html)}`;
  return code;
  // code => 'export default "<h1>About</h1><p>this is a markdown file.</p>"'
};
```

é™¤äº† module.exports è¿™ç§æ–¹å¼ï¼ŒWebpack è¿˜å…è®¸æˆ‘ä»¬åœ¨è¿”å›çš„ä»£ç ä¸­ä½¿ç”¨ ES Modules çš„æ–¹å¼å¯¼å‡ºï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬è¿™é‡Œå°† module.exports ä¿®æ”¹ä¸º export defaultï¼Œç„¶åè¿è¡Œæ‰“åŒ…ï¼Œç»“æœåŒæ ·æ˜¯å¯ä»¥çš„ï¼ŒWebpack å†…éƒ¨ä¼šè‡ªåŠ¨è½¬æ¢ ES Modules ä»£ç 

```js
// ./markdown-loader.js
const marked = require("marked");

module.exports = (source) => {
  const html = marked(source);
  // const code = `module.exports = ${JSON.stringify(html)}`
  const code = `export default ${JSON.stringify(html)}`;
  return code;
};
```

## å¤šä¸ª Loader çš„é…åˆ

æˆ‘ä»¬è¿˜å¯ä»¥å°è¯•ä¸€ä¸‹åˆšåˆšè¯´çš„ç¬¬äºŒç§æ€è·¯ï¼Œå°±æ˜¯åœ¨æˆ‘ä»¬è¿™ä¸ª markdown-loader ä¸­ç›´æ¥è¿”å› HTML å­—ç¬¦ä¸²ï¼Œç„¶åäº¤ç»™ä¸‹ä¸€ä¸ª Loader å¤„ç†ã€‚è¿™å°±æ¶‰åŠå¤šä¸ª Loader ç›¸äº’é…åˆå·¥ä½œçš„æƒ…å†µäº†ã€‚

æˆ‘ä»¬å›åˆ°ä»£ç ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥è¿”å› marked è§£æåçš„ HTMLï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º

```js
// ./markdown-loader.js
const marked = require("marked");

module.exports = (source) => {
  // 1. å°† markdown è½¬æ¢ä¸º html å­—ç¬¦ä¸²
  const html = marked(source);
  return html;
};
```

ç„¶åæˆ‘ä»¬å†å®‰è£…ä¸€ä¸ªå¤„ç† HTML çš„ Loaderï¼Œå«ä½œ html-loader

```js
module: {
  rules: [
    {
      test: /\.md$/,
      use: ["html-loader", "./markdown-loader"],
    },
  ];
}
```

è¿™é‡Œçš„æ‰“åŒ…ç»“æœä»ç„¶æ˜¯ ok çš„
